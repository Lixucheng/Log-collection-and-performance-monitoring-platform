<layout :loading='loading' title='性能监控平台'>
  <div class="perf-list-page">
    <div v-title="'性能监控平台-项目列表'"></div>

    <el-row class="page-title">
      <div class="title">我的项目列表</div>
      <div class="add-btn">
        <el-button type="success" @click='showAddDialog'> <i class="el-icon-plus"></i> &nbsp;添加</el-button>
      </div>
    </el-row>


    <el-row class='search-container'>
      <el-row class='search'>
        <el-form :inline="true" :model="searchData">
          <el-form-item label="名称">
            <el-input v-model="searchData.name" placeholder="请输入项目名称"></el-input>
          </el-form-item>
          <el-form-item label="类别">
            <el-select v-model="searchData.type" placeholder="请选择">
              <el-option v-for="item in types" :key="item.name" :label="item.name" :value="item.value">
              </el-option>
            </el-select>
          </el-form-item>
          <el-form-item>
            <el-button type="primary" @click="search">搜索</el-button>
            <el-button @click="clearSearch">清空搜索</el-button>
          </el-form-item>
        </el-form>

      </el-row>

    </el-row>
    <el-table :data="list" stripe style="width: 100%">
      <el-table-column prop="name" label="项目名称">
      </el-table-column>
      <el-table-column prop="type" label="项目类别">
      </el-table-column>
      <el-table-column prop="creater.name" label="所有人">
      </el-table-column>
      <el-table-column prop="createdAt" label="创建时间">
      </el-table-column>
      <el-table-column label="操作">
        <template scope="scope">
          <a :href="'/perf/detail/' + scope.row.id" class='el-button el-button--small el-button--default a-btn'>查看</a>
        </template>
      </el-table-column>
    </el-table>

    <el-dialog class='add-dialog' :modal='false' title="新建项目" v-model="addDialogShow">
      <el-form ref='projectForm' :model="projectData" :rules='rojectRules'>
        <el-form-item label="项目名称:" label-width='120px' prop="name">
          <el-input v-model="projectData.name"></el-input>
        </el-form-item>
       
        <el-form-item label="项目类型:" label-width='120px' prop="type">
          <el-select v-model="projectData.type" placeholder="请选择项目类型">
            <el-option label="nwjs" value="nwjs"></el-option>
            <el-option label="electron" value="electron"></el-option>
            <el-option label="其他" value="other"></el-option>
          </el-select>
        </el-form-item>
      </el-form>
      <div slot="footer" class="dialog-footer">
        <el-button @click="addDialogShow = false">取 消</el-button>
        <el-button type="primary" @click="addProject">确 定</el-button>
      </div>
    </el-dialog>
  </div>

</layout>
